{% extends 'base.html' %}

{% block content %}
    <div id="chat-container">
        <div id="chat-messages">
            <!-- Здесь будут отображаться сообщения чат-бота -->
        </div>
        <form id="chat-form">
            {% csrf_token %}
            <input type="text" id="chat-message-input" name="message" placeholder="Введите сообщение...">
            <button type="submit">Отправить</button>
        </form>
    </div>

    <script>
        const chatForm = document.querySelector('#chat-form');
const chatInput = document.querySelector('#chat-message-input');
const chatMessages = document.querySelector('#chat-messages');

chatForm.addEventListener('submit', (event) => {
  event.preventDefault();
  const message = chatInput.value;

  // Отправка сообщения на сервер
  fetch('/api/chat', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ message: message })
  })
  .then(response => response.json())
  .then(data => {
    // Отображение ответа от сервера
    const botMessage = document.createElement('div');
    botMessage.textContent = data.message;
    chatMessages.appendChild(botMessage);
  })
  .catch(error => console.error(error));

  // Очистка поля ввода сообщения
  chatInput.value = '';
});

    </script>
{% endblock %}
